[handshake_contract]

[handshake_contract.metadata]
name = "EdgeCTL Mirage-Ghost Handshake Contract"
version = "v1"
scope = "session start and registration sequence"

[sequence]
steps = [
  "ghost dials mirage",
  "transport security handshake completes",
  "mirage binds peer identity to ghost_id",
  "ghost sends seed registration payload",
  "mirage acknowledges registration",
  "session enters ready state",
]

[required_registration_fields]

[required_registration_fields.fields]
ghost_id = "required"
seed_list = "required"
seed_list_item = "id,name,description"

[failure_behavior]

[failure_behavior.rules]
identity_bind_failure = "close session"
registration_validation_failure = "reject registration and close session"
timeout_during_handshake = "close session"
